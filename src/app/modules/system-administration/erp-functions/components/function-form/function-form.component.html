<div class="card">
    <div class="flex justify-content-between align-items-center mb-4">
        <h2>{{ isEdit ? 'Edit Function' : 'Create New Function' }}</h2>
        <p-button label="Back to List" icon="pi pi-arrow-left" class="p-button-secondary" (onClick)="cancel()"
            [disabled]="loading">
        </p-button>
    </div>

    <form *ngIf="form" [formGroup]="form" (ngSubmit)="submit()">
        <div class="flex flex-column gap-3">
            <!-- Code Field -->
            <div class="field p-fluid">
                <label for="code">Code <span class="text-red-500">*</span></label>
                <input id="code" type="text" pInputText formControlName="code" [maxlength]="10"
                    placeholder="Enter function code (max 10 characters)" />
                <small class="p-error" *ngIf="submitted && f['code'].invalid">
                    {{ codeError }}
                </small>
            </div>

            <!-- Name Field -->
            <div class="field p-fluid">
                <label for="name">Name <span class="text-red-500">*</span></label>
                <input id="name" type="text" pInputText formControlName="name" [maxlength]="30"
                    placeholder="Enter function name (max 30 characters)" />
                <small class="p-error" *ngIf="submitted && f['name'].invalid">
                    {{ nameError }}
                </small>
            </div>

            <!-- Is Regional Checkbox (only for edit mode) -->
            <div class="field p-fluid" *ngIf="isEdit">
                <p-inputSwitch formControlName="isRegional" id="isRegional"></p-inputSwitch>
                <label for="isRegional" class="ml-2">Is Regional</label>
                <small class="block text-500 mt-1">Check this if you want to create/update a regional name</small>
            </div>

            <!-- Default Order Field -->
            <div class="field p-fluid">
                <label for="defaultOrder">Default Order <span class="text-red-500">*</span></label>
                <input id="defaultOrder" type="number" pInputText formControlName="defaultOrder" [min]="1"
                    placeholder="Enter default order (must be > 0)" />
                <small class="p-error" *ngIf="submitted && f['defaultOrder'].invalid">
                    {{ defaultOrderError }}
                </small>
            </div>

            <!-- URL Field -->
            <div class="field p-fluid">
                <label for="url">URL</label>
                <input id="url" type="text" pInputText formControlName="url"
                    placeholder="Enter function URL (optional)" />
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-content-end gap-2 mt-4">
            <p-button label="Cancel" icon="pi pi-times" class="p-button-text" (onClick)="cancel()" [disabled]="loading">
            </p-button>
            <p-button [label]="isEdit ? 'Update' : 'Create'" icon="pi pi-check" type="submit" [loading]="loading"
                [disabled]="loading || form.invalid">
            </p-button>
        </div>
    </form>
</div>

<p-toast></p-toast>