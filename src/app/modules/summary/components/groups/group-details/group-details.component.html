<div class="card">
    <!-- Header -->
    <div class="flex justify-content-between align-items-center mb-4">
        <h2>Group Members of {{ group?.title }}</h2>
        <p-button label="Back to List" icon="pi pi-arrow-left" class="p-button-secondary" (onClick)="navigateBack()"
            [disabled]="loading">
        </p-button>
    </div>

    <!-- Skeleton: same layout as group-members (search + Add Members + table 4 cols + paginator) -->
    <div *ngIf="loading" class="group-details-skeleton">
        <div class="flex justify-content-between align-items-center mb-4">
            <p-skeleton width="18rem" height="2rem"></p-skeleton>
            <p-skeleton width="8rem" height="2.5rem" styleClass="rounded"></p-skeleton>
        </div>
        <div class="flex justify-content-between align-items-center mb-4">
            <p-skeleton width="100%" height="2.5rem" styleClass="rounded" [style]="{ maxWidth: '400px' }"></p-skeleton>
            <p-skeleton width="10rem" height="2.5rem" styleClass="rounded"></p-skeleton>
        </div>
        <div class="datatable-skeleton-wrapper">
            <table class="datatable-skeleton">
                <colgroup>
                    <col style="width: 100px">
                    <col>
                    <col>
                    <col style="width: 150px">
                </colgroup>
                <thead>
                    <tr>
                        <th><p-skeleton height="1.25rem"></p-skeleton></th>
                        <th><p-skeleton height="1.25rem"></p-skeleton></th>
                        <th><p-skeleton height="1.25rem"></p-skeleton></th>
                        <th><p-skeleton height="1.25rem"></p-skeleton></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]">
                        <td><p-skeleton height="2rem"></p-skeleton></td>
                        <td><p-skeleton height="2rem"></p-skeleton></td>
                        <td><p-skeleton height="2rem"></p-skeleton></td>
                        <td><p-skeleton height="2rem"></p-skeleton></td>
                    </tr>
                </tbody>
            </table>
            <div class="datatable-skeleton-paginator">
                <p-skeleton width="280px" height="2.5rem"></p-skeleton>
            </div>
        </div>
    </div>

    <!-- Members Component -->
    <div *ngIf="!loading && group">
        <app-group-members [groupId]="getGroupIdAsNumber()" (membersUpdated)="handleGroupUpdated()">
        </app-group-members>
    </div>
</div>

<p-toast></p-toast>