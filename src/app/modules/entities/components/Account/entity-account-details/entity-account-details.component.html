<p-dialog [(visible)]="visible" [modal]="true" [style]="{ width: '600px' }" [closable]="true" [draggable]="false"
    [resizable]="false" (onHide)="onDialogHide()">
    <ng-template pTemplate="header">
        <h3>Account Details</h3>
    </ng-template>

    <!-- Loading State -->
    <div *ngIf="loadingAccountDetails" class="loading-container">
        <i class="pi pi-spin pi-spinner"></i>
        <p class="loading-text">Loading account information...</p>
    </div>

    <!-- Content -->
    <div *ngIf="!loadingAccountDetails" class="dialog-content">
        <!-- Account Information Section -->
        <div class="info-section">
            <!-- Account ID -->
            <div class="info-field">
                <label class="info-label">Account ID</label>
                <span class="info-value">{{ accountId || 'N/A' }}</span>
            </div>

            <!-- User ID -->
            <div class="info-field">
                <label class="info-label">User ID</label>
                <span class="info-value">{{ userId || 'N/A' }}</span>
            </div>

            <!-- Email -->
            <div class="info-field">
                <label class="info-label">Email</label>
                <span class="info-value">{{ email || 'N/A' }}</span>
            </div>

            <!-- Entity ID -->
            <div class="info-field">
                <label class="info-label">Entity ID</label>
                <span class="info-value">{{ entityId || 'N/A' }}</span>
            </div>

            <!-- Entity Role ID -->
            <div class="info-field">
                <label class="info-label">Entity Role ID</label>
                <span class="info-value">{{ entityRoleId || 'N/A' }}</span>
            </div>

            <!-- Account State -->
            <div class="info-field">
                <label class="info-label">Account State</label>
                <div class="info-value">
                    <p-tag [value]="getAccountStateText()" [severity]="getAccountStateSeverity()"></p-tag>
                </div>
            </div>
        </div>

        <!-- Description Field (Editable) -->
        <div class="description-section">
            <div class="field p-fluid">
                <label for="detailsDescription" class="info-label">Description</label>
                <textarea id="detailsDescription" pInputTextarea [formControl]="descriptionFormControl" rows="4"
                    placeholder="Enter account description"></textarea>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <ng-template pTemplate="footer">
        <div class="flex justify-content-end gap-2">
            <p-button label="Close" icon="pi pi-times" class="p-button-text" (onClick)="closeDialog()"
                [disabled]="savingAccountDetails">
            </p-button>
            <p-button label="Save" icon="pi pi-check" (onClick)="saveAccountDetails()" [loading]="savingAccountDetails"
                [disabled]="savingAccountDetails ||!isDescriptionModified">
            </p-button>
        </div>
    </ng-template>
</p-dialog>