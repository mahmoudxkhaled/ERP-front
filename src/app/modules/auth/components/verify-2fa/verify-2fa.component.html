<div class="body">
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>

  <div class="login-container">
    <h2>Two Factor Authentication</h2>
    <p class="message">Your account has a 2 factor authentication login</p>
    <p class="info-text">
      <i class="pi pi-info-circle" style="margin-right: 5px;"></i>
      Please enter the 6-digit code sent to your email
    </p>

    <form [formGroup]="form" (ngSubmit)="verify2FA()">
      <div class="form-group">
        <div class="input-group">
          <input type="text" class="custom-input" id="code1" #code1Input maxlength="1" formControlName="code1"
            (keyup)="moveToNext($event, 'code2')" />
          <input type="text" class="custom-input" id="code2" maxlength="1" formControlName="code2"
            (keyup)="moveToNext($event, 'code3')" (keydown.backspace)="moveToPrev($event, 'code1')" />
          <input type="text" class="custom-input" id="code3" maxlength="1" formControlName="code3"
            (keyup)="moveToNext($event, 'code4')" (keydown.backspace)="moveToPrev($event, 'code2')" />
          <input type="text" class="custom-input" id="code4" maxlength="1" formControlName="code4"
            (keyup)="moveToNext($event, 'code5')" (keydown.backspace)="moveToPrev($event, 'code3')" />
          <input type="text" class="custom-input" id="code5" maxlength="1" formControlName="code5"
            (keyup)="moveToNext($event, 'code6')" (keydown.backspace)="moveToPrev($event, 'code4')" />
          <input type="text" class="custom-input" id="code6" maxlength="1" formControlName="code6"
            (keyup)="moveToNext($event, '')" (keydown.backspace)="moveToPrev($event, 'code5')" />
        </div>
      </div>

      <div *ngIf="validationMessage" class="backend-error-message">
        <i class="pi pi-exclamation-circle" style="margin-right: 10px;"></i>
        <span>
          {{ validationMessage }}
        </span>
      </div>

      <div class="flex align-items-center justify-content-center mt-4 gap-3">
        <button class="login-btn" type="submit" [disabled]="form.invalid || (isLoading$ | async)">
          <ng-container *ngIf="isLoading$ | async">
            <span class="indicator-progress" [style.display]="'block'">
              {{ 'auth.login.pleaseWait' | translate }}
              <i class="pi pi-spin pi-spinner" style="font-size: 1rem"></i>
            </span>
          </ng-container>
          <ng-container *ngIf="(isLoading$ | async) === false">
            <span>Verify</span>
          </ng-container>
        </button>
      </div>
    </form>

    <div class="links">
      <a routerLink="/auth">Back to Login</a>
    </div>

    <div class="footer">
      Â© {{ yearNow }} Promatech LLC. All rights reserved.
    </div>
  </div>
</div>